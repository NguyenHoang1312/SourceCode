CREATE TABLE PHONG (
	MaPhong VARCHAR(10) NOT NULL,
    LoaiPhong NVARCHAR(30),
    SoKhachToiDa INT,
    GiaPhong1H MONEY,
    MoTa NVARCHAR(20),
    CONSTRAINT PK_PHONG PRIMARY KEY (MaPhong)
)

CREATE TABLE KHACH_HANG (
    MaKH VARCHAR(10) NOT NULL,
    TenKH NVARCHAR(30),
    DiaChi NVARCHAR(20),
    SoDT VARCHAR(20),
    CONSTRAINT PK_KHACH_HANG PRIMARY KEY (MaKH)
)

CREATE TABLE DAT_PHONG (
    MaDatPhong VARCHAR(10) NOT NULL,
    MaPhong VARCHAR(10),
    MaKH VARCHAR(10),
    NgayDat DATE,
    GioBatDau TIME,
    GioKetThuc TIME,
    TienDatCoc MONEY,
    GhiChu NVARCHAR(20),
    TrangThaiDat NVARCHAR(20),
    CONSTRAINT PK_DAT_PHONG PRIMARY KEY (MaDatPhong),
    CONSTRAINT FK_DAT_PHONG_PHONG FOREIGN KEY (MaPhong) REFERENCES PHONG (MaPhong),
    CONSTRAINT FK_DAT_PHONG_PHONG FOREIGN KEY (MaKH) REFERENCES KHACH_HANG (MaKH)
)

CREATE TABLE DICH_VU_DI_KEM (
    MaDV VARCHAR(10) NOT NULL,
    TenDV NVARCHAR(20),
    DonViTinh NVARCHAR(10),
    DonGia MONEY,
    CONSTRAINT PK_DICH_VU_DI_KEM PRIMARY KEY (MaDV)
)

CREATE TABLE CHI_TIET_SU_DUNG_DICH_VU (
    MaDatPhong VARCHAR(10),
    MaDV VARCHAR(10),
    SoLuong INT,
    CONSTRAINT PK_CHI_TIET_SU_DUNG_DICH_VU PRIMARY KEY (MaDatPhong, MaDV),
    CONSTRAINT FK_CHI_TIET_SU_DUNG_DICH_VU_DAT_PHONG FOREIGN KEY (MaDatPhong) REFERENCES DAT_PHONG(MaDatPhong),
    CONSTRAINT FK_CHI_TIET_SU_DUNG_DICH_VU_DICH_VU_DI_KEM FOREIGN KEY (MaDV) REFERENCES DICH_VU_DI_KEM(MaDV)
)

INSERT INTO PHONG VALUES
    ('P0001', N'Loại 1', 20, 60000, ''),
    ('P0002', N'Loại 1', 25, 80000, ''),
    ('P0003', N'Loại 2', 15, 50000, ''),
    ('P0004', N'Loại 3', 20, 50000, '')

INSERT INTO KHACH_HANG VALUES 
    ('KH0001', N'Nguyễn Văn A', N'Hòa Xuân', '1111111111'),
    ('KH0002', N'Nguyễn Văn B', N'Hòa Hải', '1111111112'),
    ('KH0003', N'Phan Văn A', N'Cẩm lệ', '1111111113'),
    ('KH0004', N'Phan Văn B', N'Hòa Xuân', '1111111114')

INSERT INTO DICH_VU_DI_KEM VALUES
    ('DV001', N'Bia', N'lon', 10000),
    ('DV002', N'Nước ngọt', N'lon', 8000),
    ('DV003', N'Trái cây', N'đĩa', 35000),
    ('DV004', N'Khắn ướt', N'cái', 2000)

INSERT INTO DAT_PHONG VALUES 
    ('DP0001', 'P0001', 'KH0002', '20180326', '11:00:00', '13:30:00', 100000, '', N'Đã đặt'),
    ('DP0002', 'P0001', 'KH0003', '20180327', '17:15:00', '19:15:00', 50000, '', N'Đã hủy'),
    ('DP0003', 'P0002', 'KH0002', '20180326', '20:30:00', '22:15:00', 100000, '', N'Đã đặt'),
    ('DP0004', 'P0003', 'KH0001', '20180401', '19:30:00', '21:15:00', 200000, '', N'Đã đặt')

INSERT INTO CHI_TIET_SU_DUNG_DICH_VU VALUES
    ('DP0001', 'DV001', 20),
    ('DP0001', 'DV003', 3),
    ('DP0001', 'DV002', 10),
    ('DP0002', 'DV002', 10),
    ('DP0002', 'DV003', 1),
    ('DP0003', 'DV003', 2),
    ('DP0003', 'DV004', 10)

